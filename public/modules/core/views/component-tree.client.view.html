<div ng-controller="treeCtrl as ctrl">
    <div class="tabs-nav">
        <a>WorkSpace <span class="caret"></span></a>
    </div>

    <div class="list-group-item">
        <div class="input-group">
            <input type="text" class="form-control ng-valid ng-dirty" ng-model="_filter.title" placeholder="Search...">
                    <span class="input-group-btn">
                        <button class="btn btn-primary" type="button">
                            <i class="glyphicon glyphicon-search"></i>
                        </button>
                    </span>
        </div>

        <tree-dnd tree-data="tree_data"
                  tree-class="table table-bordered table-hover table-striped"
                  tree-control="my_tree"
                  column-defs="col_defs"
                  filter="_filter"
                  expand-on="expanding_property"
                  on-select="select_handler(node)"
                  on-click="click_handler(node)"
                  expand-level="5"
                  icon-leaf="none"
                  icon-expand="glyphicon glyphicon-chevron-down"
                  icon-collapse="glyphicon glyphicon-chevron-right"
                >

            <table ng-class="$tree_class">
                <thead>
                <tr>
                    <th ng-class="expandingProperty.titleClass" ng-style="expandingProperty.titleStyle">
                        {{expandingProperty.displayName || expandingProperty.field || expandingProperty}}
                    </th>
                    <th ng-repeat="col in colDefinitions" ng-class="col.titleClass"
                        ng-style="col.titleStyle">
                        {{col.displayName || col.field}}
                    </th>
                </tr>
                </thead>
                <tbody tree-dnd-nodes="tree_nodes">
                <tr tree-dnd-node="node" ng-repeat="node in nodes track by node.__hashKey__ "
                    ng-show="enabledFilter ? node.__filtered_visible__ === true && node.__visible__ : node.__visible__"
                    ng-class="enabledFilter ? (node.__filtered__ === true? 'success': '') : (node.__selected__ ? ' active':'')"
                    ng-click="onSelect(node)">
                    <td ng-if="!expandingProperty.template" tree-dnd-node-handle
                        ng-style="expandingProperty.cellStyle ? expandingProperty.cellStyle : {'padding-left': $callbacks.calsIndent(node.__level__)}"
                        ng-class="expandingProperty.cellClass" compile="expandingProperty.cellTemplate">
                        <a data-nodrag> <i ng-class="$icon_class" ng-click="toggleExpand(node)"
                                           class="tree-icon"></i>
                        </a> {{node[expandingProperty.field] || node[expandingProperty]}}
                    </td>
                    <td ng-if="expandingProperty.template" compile="expandingProperty.template"></td>
                    <td ng-repeat="col in colDefinitions" ng-class="col.cellClass" ng-style="col.cellStyle"
                        compile="col.cellTemplate">
                        {{node[col.field]}}
                    </td>
                </tr>
                </tbody>
            </table>
        </tree-dnd>

    </div>
</div>