<md-dialog aria-label="Add Bus" md-theme="core-theme" ng-cloak>

    <form name="myFormAddBus">

        <md-toolbar class="md-accent" flex>
            <div class="md-toolbar-tools">
                <md-icon class="md-icon-button md-accent" aria-label="add">add_circle_outline
                </md-icon>
                <span flex></span>
                <h2>Add <b>'{{ formChildData.type }}'</b> on <b>'{{ parentTitle}}'</b></h2>
                <span flex></span>
                <!--                <md-button type="button" class="md-icon-button" ng-click="closeDialog()">
                                    <md-icon md-svg-icon="navigation:close" aria-label="Close dialog"></md-icon>
                                </md-button>-->
            </div>
        </md-toolbar>

        <!-- Choix du bus -->
        <md-card layout="column" layout-padding flex>

            <div flex layout="row" layout-align="space-between center">
                <div flex-initial>
                    <span>Create / Connect - Bus</span>
                </div>
            </div>

            <md-divider></md-divider>

            <div layout="row">

                <div layout-margin>
                    <md-radio-group ng-model="choiceBusSelected.selected" class="effect-radio-group">
                        <md-radio-button ng-click="checkSelection()" class="md-primary"
                                         ng-repeat="choice in choiceBusList"
                                         ng-value="choice.value" ng-disabled=" choice.isDisabled "
                                         ng-class="{'md-align-top-left': $index==1}">{{choice.name}}
                        </md-radio-button>
                    </md-radio-group>
                </div>

                <!-- Affiche la section qui correspond au nom du bus-->
                <div id="wrapper" ng-switch="choiceBusSelected.selected">

                    <div ng-switch-when="one">

                        <md-input-container class="md-block md-accent">
                            <label>Select your type :</label>
                            <md-select name="myChoiceType" ng-model="myChoiceType" class="md-accent"
                                       placeholder="4-3-3" ng-change="changeSelectedType()">

                                <md-option class="md-accent" ng-repeat="ct in choiceList" ng-value="ct">
                                    {{ct.name}}
                                </md-option>

                            </md-select>
                            <md-card>
                                {{myChoiceType}}
                            </md-card>
                            <!--                            <div ng-messages="myFormAddBusCreate.myChoiceType.$error"
                                                             ng-if="!myFormAddBusCreate.$dirty && hasChoice()">
                                                            <div ng-message="required">Select your choice.</div>
                                                        </div>-->
                        </md-input-container>

                        <md-input-container class="md-block md-accent">
                            <label>Name :</label>
                            <input type="text" ng-model="formChildData.title" md-maxlength="30" required
                                   placeholder="4-3-3">
                        </md-input-container>
                        <!--                        <md-input-container class="md-block md-accent">
                                                    <label>Name :</label>
                                                    <input type="text" ng-model="myChoiceType.name" md-maxlength="30" required>

                        &lt;!&ndash;                            <div ng-messages="myFormAddBusCreate.name.$error">
                                                        <div ng-message="required">Name is required.</div>
                                                        <div ng-message="md-maxlength">The name has to be less than 30 characters long.</div>
                                                    </div>&ndash;&gt;
                                                </md-input-container>-->

                        <div class="md-actions" layout="row" layout-align="space-between center">
                            <span flex></span>

                            <md-button ng-click="validDialog(formChildData);"
                                       class="md-primary" ng-disabled="myFormAddBus.$invalid"
                                       ng-class="{'md-raised md-hue-1': (myFormAddBus.$dirty && myFormAddBus.$valid) }">
                                Create
                            </md-button>
                            <md-button ng-click="closeDialog()" aria-label="Cancel">
                                Cancel
                            </md-button>
                        </div>

                    </div>

                    <!-- BUS EXISTING SELECTED -->
                    <div ng-switch-when="two">
                        <div class="md-accent" layout="column" flex>

                            <div class="md-accent">
                                <div layout="column">

                                    <div flex layout="row" layout-align="center center">
                                        <div flex-initial>
                                            <span class="name">Data Source JMX</span>
                                        </div>
                                    </div>

                                    <div layout="row">

                                        <md-input-container class="md-block md-accent">
                                            <label>Ip / Hostname :</label>
                                            <input type="text" placeholder="xxx.xxx.xxx.xxx" ng-model="hostname"
                                                   input-clear>
                                        </md-input-container>

                                        <md-input-container class="md-block md-accent">
                                            <label>Port :</label>
                                            <input type="text" placeholder="7700" ng-model="port" input-clear>
                                        </md-input-container>
                                    </div>

                                    <div flex layout="row" layout-align="center center">
                                        <div flex-initial>
                                            <span class="name">Security JMX</span>
                                        </div>
                                    </div>

                                    <div layout="row">

                                        <md-input-container class="md-block md-accent">
                                            <label>Username :</label>
                                            <input type="text" placeholder="petals" ng-model="username" input-clear>
                                        </md-input-container>

                                        <md-input-container class="md-block md-accent">
                                            <label>Network Security Key :</label>
                                            <input type="password" placeholder="petals" ng-model="password" input-clear>
                                        </md-input-container>
                                    </div>
                                </div>

                            </div>

                            <div class="md-actions" layout="row" layout-align="space-between center">
                                <span flex></span>
                                <md-button ng-click="validDialog(formChildData);"
                                           class="md-primary" ng-disabled="myFormAddBus.$invalid"
                                           ng-class="{'md-raised md-hue-1': (myFormAddBus.$dirty && myFormAddBus.$valid) }">Connect</md-button>
                                <md-button ng-click="closeDialog()" aria-label="Cancel">
                                    Cancel
                                </md-button>
                            </div>

                        </div>
                    </div>
                    <div ng-switch-when="three">
                        <h2>Connect Bus</h2>
                    </div>
                </div>
            </div>

        </md-card>

    </form>

</md-dialog>
